<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href=" store.css ">
        <title>Store</title>


    </head>

    <body>
        <div class="nav">
            <h1>Store </h1>

            <i onclick="cart()" class="fa fa-shopping-cart">
                <div id="cart"> </div>
            </i>

        </div>

        <div id="display">

        </div>

    </body>

</html>
<script>


    let cartItems = []

    let container = []
    fetch('store.json')
        .then((response) => response.json())
        .then((items) => {
            container = items
            items.map((val, index) => {
                document.getElementById('display').innerHTML +=
                    `
            <div class=" obj">
                 <h3> ${val.title}</h3>
                 <div style= " width: 100% ;"> <img src= ${val.image} /> </div>   
                <h5> <span> Price: </span>  ${val.price} $</h5>
                <button onclick="  addtocart( ${index}) "> Add </button>
            </div >
      
                `
            })


        })

    function addtocart(index) {

        let title = container[index].title
        let imageSource = container[index].image
        let price = container[index].price

        let objinstore = { title, imageSource, price }

        cartItems.push(objinstore)
        document.getElementById('cart').innerHTML = cartItems.length
        localStorage.setItem("objinstore", JSON.stringify(cartItems))

    }


    function cart() {
        window.location.href = "cart.html"
    }

    let ArrofobjinStore = JSON.parse(localStorage.getItem('objinstore'))
    ArrofobjinStore.map((value) => {
        cartItems.push(value)
    })

    if (cartItems.length > 0) {
        document.getElementById('cart').innerHTML = cartItems.length
    }

</script>